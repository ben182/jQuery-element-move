!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t(jQuery)}(function(t,e){function n(t){function e(){a?(n(),K(e),i=!0,a=!1):i=!1}var n=t,a=!1,i=!1;this.kick=function(){a=!0,i||e()},this.end=function(t){var e=n;t&&(i?(n=a?function(){e(),t()}:t,a=!0):t())}}function a(){return!0}function i(){return!1}function o(t){t.preventDefault()}function r(t){L[t.target.tagName.toLowerCase()]||t.preventDefault()}function c(t){return 1===t.which&&!t.ctrlKey&&!t.altKey}function s(t,e){var n,a;if(t.identifiedTouch)return t.identifiedTouch(e);for(n=-1,a=t.length;++n<a;)if(t[n].identifier===e)return t[n]}function u(t,e){var n=s(t.changedTouches,e.identifier);if(n&&(n.pageX!==e.pageX||n.pageY!==e.pageY))return n}function d(t){var e;c(t)&&(e={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:t.timeStamp},j(document,N.move,m,e),j(document,N.cancel,p,e))}function m(t){var e=t.data;x(t,e,t,f)}function p(){f()}function f(){z(document,N.move,m),z(document,N.cancel,p)}function l(t){var e,n;L[t.target.tagName.toLowerCase()]||(e=t.changedTouches[0],n={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:t.timeStamp,identifier:e.identifier},j(document,Q.move+"."+e.identifier,v,n),j(document,Q.cancel+"."+e.identifier,g,n))}function v(t){var e=t.data,n=u(t,e);n&&x(t,e,n,h)}function g(t){var e=t.data,n=s(t.changedTouches,e.identifier);n&&h(e.identifier)}function h(t){z(document,"."+t,v),z(document,"."+t,g)}function x(t,e,n,a){var i=n.pageX-e.startX,o=n.pageY-e.startY;R*R>i*i+o*o||b(t,e,n,i,o,a)}function X(){return this._handled=a,!1}function Y(t){t._handled()}function b(t,e,n,a,i,o){{var r,c;e.target}r=t.targetTouches,c=t.timeStamp-e.timeStamp,e.type="movestart",e.distX=a,e.distY=i,e.deltaX=a,e.deltaY=i,e.pageX=n.pageX,e.pageY=n.pageY,e.velocityX=a/c,e.velocityY=i/c,e.targetTouches=r,e.finger=r?r.length:1,e._handled=X,e._preventTouchmoveDefault=function(){t.preventDefault()},I(e.target,e),o(e.identifier)}function k(t){var e=t.data.timer;t.data.touch=t,t.data.timeStamp=t.timeStamp,e.kick()}function w(t){var e=t.data.event,n=t.data.timer;y(),O(e,n,function(){setTimeout(function(){z(e.target,"click",i)},0)})}function y(){z(document,N.move,k),z(document,N.end,w)}function T(t){var e=t.data.event,n=t.data.timer,a=u(t,e);a&&(t.preventDefault(),e.targetTouches=t.targetTouches,t.data.touch=a,t.data.timeStamp=t.timeStamp,n.kick())}function S(t){var e=t.data.event,n=t.data.timer,a=s(t.changedTouches,e.identifier);a&&(A(e),O(e,n))}function A(t){z(document,"."+t.identifier,T),z(document,"."+t.identifier,S)}function D(t,e,n){var a=n-t.timeStamp;t.type="move",t.distX=e.pageX-t.startX,t.distY=e.pageY-t.startY,t.deltaX=e.pageX-t.pageX,t.deltaY=e.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/a,t.velocityY=.3*t.velocityY+.7*t.deltaY/a,t.pageX=e.pageX,t.pageY=e.pageY}function O(t,e,n){e.end(function(){return t.type="moveend",I(t.target,t),n&&n()})}function C(){return j(this,"movestart.move",Y),!0}function _(){return z(this,"dragstart drag",o),z(this,"mousedown touchstart",r),z(this,"movestart",Y),!0}function q(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(j(this,"dragstart."+t.guid+" drag."+t.guid,o,e,t.selector),j(this,"mousedown."+t.guid,r,e,t.selector))}function F(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(z(this,"dragstart."+t.guid+" drag."+t.guid),z(this,"mousedown."+t.guid))}var R=6,j=t.event.add,z=t.event.remove,I=function(e,n,a){t.event.trigger(n,a,e)},K=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t()},25)}}(),L={textarea:!0,input:!0,select:!0,button:!0},N={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},Q={move:"touchmove",cancel:"touchend",end:"touchend"};t.event.special.movestart={setup:C,teardown:_,add:q,remove:F,_default:function(t){function a(){D(o,r.touch,r.timeStamp),I(t.target,o)}var o,r;t._handled()&&(o={target:t.target,startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,timeStamp:t.timeStamp,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},r={event:o,timer:new n(a),touch:e,timeStamp:e},t.identifier===e?(j(t.target,"click",i),j(document,N.move,k,r),j(document,N.end,w,r)):(t._preventTouchmoveDefault(),j(document,Q.move+"."+t.identifier,T,r),j(document,Q.end+"."+t.identifier,S,r)))}},t.event.special.move={setup:function(){j(this,"movestart.move",t.noop)},teardown:function(){z(this,"movestart.move",t.noop)}},t.event.special.moveend={setup:function(){j(this,"movestart.moveend",t.noop)},teardown:function(){z(this,"movestart.moveend",t.noop)}},j(document,"mousedown.move",d),j(document,"touchstart.move",l),"function"==typeof Array.prototype.indexOf&&!function(t){for(var e=["changedTouches","targetTouches"],n=e.length;n--;)-1===t.event.props.indexOf(e[n])&&t.event.props.push(e[n])}(t)}),function(t){t.fn.elementMove=function(e){var n=0,a=0,i=0,o=0,r=0,c=0,s=0,u=0,d=0,m=0,p=!1,f=t(this),l=t.extend({backToOrigin:!1,backToOriginAnimation:"cubic-bezier(0.39, 0.58, 0.54, 1.42)",backToOriginAnimationDuration:.5,swipeDirection:4,momentum:!1,xScrollAmount:1,yScrollAmount:1,scrollAmountCallback:function(){},endCallback:function(){}},e);return f.bind("movestart",function(t){n=t.pageX,a=t.pageY,f.css("transition",""),s=0,u=0}).bind("move",function(e){switch(p=!1,i=-1*(n-e.pageX),o=-1*(a-e.pageY),r&&(i-=r),o&&(o-=c),l.swipeDirection){case 0:f.css("transform","translate3d("+i+"px, 0px, 0px)"),p=!0;break;case 1:f.css("transform","translate3d(0px, "+o+"px, 0px)"),p=!0;break;case 2:f.css("transform","translate3d("+i+"px, "+o+"px, 0px)"),p=!0;break;case 3:u>o&&(t(this).css("transform","translate3d(0px, "+o+"px, 0px)"),u=o,p=!0);break;case 4:o>u&&(t(this).css("transform","translate3d(0px, "+o+"px, 0px)"),u=o,p=!0);break;case 5:i>s&&(t(this).css("transform","translate3d("+i+"px, 0px, 0px)"),s=i,p=!0);break;case 6:s>i&&(t(this).css("transform","translate3d("+i+"px, 0px, 0px)"),s=i,p=!0);break;default:f.css("transform","translate3d("+i+"px, "+o+"px, 0px)"),p=!0}var v=f.width()*l.xScrollAmount,g=f.height()*l.yScrollAmount;(i>v||-1*v>i||o>g||-1*g>o)&&l.scrollAmountCallback(),d=e.deltaX,m=e.deltaY}).bind("moveend",function(){if(l.backToOrigin)f.css("transition","all "+l.backToOriginAnimationDuration+"s "+l.backToOriginAnimation),f.css("transform","translate3d( 0px, 0px, 0px)");else{var e=t(this).css("transform").replace("matrix(","").replace(")","").replace(" ","").split(",");if(r=parseInt(-1*e[4]),c=parseInt(-1*e[5]),l.momentum){switch(r=-1*r+4*d,c=-1*c+4*m,f.css("transition","all .5s cubic-bezier(0.01, 0.47, 0.38, 1.05)"),l.swipeDirection){case 0:f.css("transform","translate3d("+r+"px, 0px, 0px)");break;case 1:f.css("transform","translate3d(0px, "+c+"px, 0px)");break;case 2:f.css("transform","translate3d("+r+"px, "+c+"px, 0px)");break;case 3:p&&f.css("transform","translate3d(0px, "+c+"px, 0px)");break;case 4:p&&f.css("transform","translate3d(0px, "+c+"px, 0px)");break;case 5:p&&f.css("transform","translate3d("+r+"px, 0px, 0px)");break;case 6:p&&f.css("transform","translate3d("+r+"px, 0px, 0px)");break;default:f.css("transform","translate3d("+r+"px, "+c+"px, 0px)")}r=-1*r,c=-1*c}}"function"==typeof l.endCallback&&l.endCallback(i,o)}),this}}(jQuery);