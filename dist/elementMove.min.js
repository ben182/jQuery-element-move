!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t(jQuery)}(function(t,e){function n(t){function e(){a?(n(),z(e),r=!0,a=!1):r=!1}var n=t,a=!1,r=!1;this.kick=function(){a=!0,r||e()},this.end=function(t){var e=n;t&&(r?(n=a?function(){e(),t()}:t,a=!0):t())}}function a(){return!0}function r(){return!1}function i(t){t.preventDefault()}function o(t){H[t.target.tagName.toLowerCase()]||t.preventDefault()}function s(t){return 1===t.which&&!t.ctrlKey&&!t.altKey}function c(t,e){var n,a;if(t.identifiedTouch)return t.identifiedTouch(e);for(n=-1,a=t.length;++n<a;)if(t[n].identifier===e)return t[n]}function u(t,e){var n=c(t.changedTouches,e.identifier);if(n&&(n.pageX!==e.pageX||n.pageY!==e.pageY))return n}function p(t){var e;s(t)&&(e={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:t.timeStamp},F(document,K.move,d,e),F(document,K.cancel,m,e))}function d(t){var e=t.data;h(t,e,t,f)}function m(){f()}function f(){R(document,K.move,d),R(document,K.cancel,m)}function l(t){var e,n;H[t.target.tagName.toLowerCase()]||(e=t.changedTouches[0],n={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:t.timeStamp,identifier:e.identifier},F(document,L.move+"."+e.identifier,g,n),F(document,L.cancel+"."+e.identifier,v,n))}function g(t){var e=t.data,n=u(t,e);n&&h(t,e,n,x)}function v(t){var e=t.data,n=c(t.changedTouches,e.identifier);n&&x(e.identifier)}function x(t){R(document,"."+t,g),R(document,"."+t,v)}function h(t,e,n,a){var r=n.pageX-e.startX,i=n.pageY-e.startY;q*q>r*r+i*i||b(t,e,n,r,i,a)}function X(){return this._handled=a,!1}function Y(t){t._handled()}function b(t,e,n,a,r,i){{var o,s;e.target}o=t.targetTouches,s=t.timeStamp-e.timeStamp,e.type="movestart",e.distX=a,e.distY=r,e.deltaX=a,e.deltaY=r,e.pageX=n.pageX,e.pageY=n.pageY,e.velocityX=a/s,e.velocityY=r/s,e.targetTouches=o,e.finger=o?o.length:1,e._handled=X,e._preventTouchmoveDefault=function(){t.preventDefault()},j(e.target,e),i(e.identifier)}function k(t){var e=t.data.timer;t.data.touch=t,t.data.timeStamp=t.timeStamp,e.kick()}function y(t){var e=t.data.event,n=t.data.timer;w(),D(e,n,function(){setTimeout(function(){R(e.target,"click",r)},0)})}function w(){R(document,K.move,k),R(document,K.end,y)}function T(t){var e=t.data.event,n=t.data.timer,a=u(t,e);a&&(t.preventDefault(),e.targetTouches=t.targetTouches,t.data.touch=a,t.data.timeStamp=t.timeStamp,n.kick())}function S(t){var e=t.data.event,n=t.data.timer,a=c(t.changedTouches,e.identifier);a&&(A(e),D(e,n))}function A(t){R(document,"."+t.identifier,T),R(document,"."+t.identifier,S)}function C(t,e,n){var a=n-t.timeStamp;t.type="move",t.distX=e.pageX-t.startX,t.distY=e.pageY-t.startY,t.deltaX=e.pageX-t.pageX,t.deltaY=e.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/a,t.velocityY=.3*t.velocityY+.7*t.deltaY/a,t.pageX=e.pageX,t.pageY=e.pageY}function D(t,e,n){e.end(function(){return t.type="moveend",j(t.target,t),n&&n()})}function I(){return F(this,"movestart.move",Y),!0}function E(){return R(this,"dragstart drag",i),R(this,"mousedown touchstart",o),R(this,"movestart",Y),!0}function O(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(F(this,"dragstart."+t.guid+" drag."+t.guid,i,e,t.selector),F(this,"mousedown."+t.guid,o,e,t.selector))}function _(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(R(this,"dragstart."+t.guid+" drag."+t.guid),R(this,"mousedown."+t.guid))}var q=6,F=t.event.add,R=t.event.remove,j=function(e,n,a){t.event.trigger(n,a,e)},z=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t()},25)}}(),H={textarea:!0,input:!0,select:!0,button:!0},K={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},L={move:"touchmove",cancel:"touchend",end:"touchend"};t.event.special.movestart={setup:I,teardown:E,add:O,remove:_,_default:function(t){function a(){C(i,o.touch,o.timeStamp),j(t.target,i)}var i,o;t._handled()&&(i={target:t.target,startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,timeStamp:t.timeStamp,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},o={event:i,timer:new n(a),touch:e,timeStamp:e},t.identifier===e?(F(t.target,"click",r),F(document,K.move,k,o),F(document,K.end,y,o)):(t._preventTouchmoveDefault(),F(document,L.move+"."+t.identifier,T,o),F(document,L.end+"."+t.identifier,S,o)))}},t.event.special.move={setup:function(){F(this,"movestart.move",t.noop)},teardown:function(){R(this,"movestart.move",t.noop)}},t.event.special.moveend={setup:function(){F(this,"movestart.moveend",t.noop)},teardown:function(){R(this,"movestart.moveend",t.noop)}},F(document,"mousedown.move",p),F(document,"touchstart.move",l),"function"==typeof Array.prototype.indexOf&&!function(t){for(var e=["changedTouches","targetTouches"],n=e.length;n--;)-1===t.event.props.indexOf(e[n])&&t.event.props.push(e[n])}(t)}),function(t){t.fn.elementMove=function(e){var n,a,r,i,o,s,c,u,p,d,m,f,l=0,g=0,v=0,x=0,h=0,X=0,Y=0,b=0,k=0,y=0,w=!1,T=t(this),S=t.extend({backToOrigin:!1,backToOriginAnimation:"cubic-bezier(0.39, 0.58, 0.54, 1.42)",backToOriginAnimationDuration:.5,swipeDirection:2,momentum:!1,stayInElement:!1,xScrollAmount:1,yScrollAmount:1,scrollAmountCallback:function(){},moveCallback:function(){},endCallback:function(){}},e);return T.bind("movestart",function(e){l=e.pageX,g=e.pageY,T.css("transition",""),Y=0,b=0,S.stayInElement&&(n=T.offset().top-t(S.stayInElement).offset().top,a=T.offset().left-t(S.stayInElement).offset().left,r=t(S.stayInElement).outerWidth(!0)-a-T.outerWidth(!0),i=t(S.stayInElement).outerHeight(!0)-n-T.outerHeight(!0),p||(p=n),d||(d=a),m||(m=r),f||(f=i),o=g-n,s=l-a,c=l+r,u=g+i)}).bind("move",function(e){if(w=!1,v=-1*(l-e.pageX),x=-1*(g-e.pageY),h&&(v-=h),X&&(x-=X),S.stayInElement){if(e.pageX<s&&e.pageY<o)return T.css("transform","translate3d("+-d+"px, "+-p+"px, 0px)"),!1;if(e.pageX>c&&e.pageY<o)return T.css("transform","translate3d("+m+"px, "+-p+"px, 0px)"),!1;if(e.pageX>c&&e.pageY>u)return T.css("transform","translate3d("+m+"px, "+f+"px, 0px)"),!1;if(e.pageX<s&&e.pageY>u)return T.css("transform","translate3d("+-d+"px, "+f+"px, 0px)"),!1;if(e.pageX<s)return T.css("transform","translate3d("+-d+"px, "+x+"px, 0px)"),!1;if(e.pageX>c)return T.css("transform","translate3d("+m+"px, "+x+"px, 0px)"),!1;if(e.pageY<o)return T.css("transform","translate3d("+v+"px, "+-p+"px, 0px)"),!1;if(e.pageY>u)return T.css("transform","translate3d("+v+"px, "+f+"px, 0px)"),!1}switch(S.swipeDirection){case 0:T.css("transform","translate3d("+v+"px, 0px, 0px)"),w=!0;break;case 1:T.css("transform","translate3d(0px, "+x+"px, 0px)"),w=!0;break;case 2:T.css("transform","translate3d("+v+"px, "+x+"px, 0px)"),w=!0;break;case 3:b>x&&(t(this).css("transform","translate3d(0px, "+x+"px, 0px)"),b=x,w=!0);break;case 4:x>b&&(t(this).css("transform","translate3d(0px, "+x+"px, 0px)"),b=x,w=!0);break;case 5:v>Y&&(t(this).css("transform","translate3d("+v+"px, 0px, 0px)"),Y=v,w=!0);break;case 6:Y>v&&(t(this).css("transform","translate3d("+v+"px, 0px, 0px)"),Y=v,w=!0);break;default:T.css("transform","translate3d("+v+"px, "+x+"px, 0px)"),w=!0}var n=T.width()*S.xScrollAmount,a=T.height()*S.yScrollAmount;(v>n||-1*n>v||x>a||-1*a>x)&&"function"==typeof S.scrollAmountCallback&&S.scrollAmountCallback(T),k=e.deltaX,y=e.deltaY,"function"==typeof S.moveCallback&&S.moveCallback(T,v,x)}).bind("moveend",function(){if(S.backToOrigin)T.css("transition","all "+S.backToOriginAnimationDuration+"s "+S.backToOriginAnimation),T.css("transform","translate3d( 0px, 0px, 0px)");else{var e=t(this).css("transform").replace("matrix(","").replace(")","").replace(" ","").split(",");if(h=parseInt(-1*e[4]),X=parseInt(-1*e[5]),S.momentum){switch(h=-1*h+4*k,X=-1*X+4*y,S.stayInElement&&(h>m&&(h=m),-1*d>h&&(h=-1*d),-1*p>X&&(X=-1*p),X>f&&(X=f)),T.css("transition","all .5s cubic-bezier(0.01, 0.47, 0.38, 1.05)"),S.swipeDirection){case 0:T.css("transform","translate3d("+h+"px, 0px, 0px)");break;case 1:T.css("transform","translate3d(0px, "+X+"px, 0px)");break;case 2:T.css("transform","translate3d("+h+"px, "+X+"px, 0px)");break;case 3:w&&T.css("transform","translate3d(0px, "+X+"px, 0px)");break;case 4:w&&T.css("transform","translate3d(0px, "+X+"px, 0px)");break;case 5:w&&T.css("transform","translate3d("+h+"px, 0px, 0px)");break;case 6:w&&T.css("transform","translate3d("+h+"px, 0px, 0px)");break;default:T.css("transform","translate3d("+h+"px, "+X+"px, 0px)")}h=-1*h,X=-1*X}}"function"==typeof S.endCallback&&S.endCallback(T,-1*h,-1*X)}),this}}(jQuery);